<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Mindanao Escapade</title>
    <script src="../static/js/jquery-3.3.1.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="../static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href='../static/vendor/fontawesome-free/css/fontawesome.css' rel='stylesheet' type='text/css'>
    <link href='../static/vendor/fontawesome-free/css/fontawesome.min.css' rel='stylesheet' type='text/css'>
    <!--<link href="../static/css/agency.css" rel="stylesheet">-->

    <!-- Custom styles for this template -->
    <link href="../static/css/clean-blog.min.css" rel="stylesheet">

      <script>
        $(document).ready(function () {
            $('#target').submit(function () {
                var username = $("#username").val();
                var password = $("#password").val();
                var firstname = $("#fname").val();
                var middlename = $("#mname").val();
                var lastname = $("#lname").val();
                var age = document.getElementById('age').innerHTML;
                var contact = $("#number").val();
                var address = $("#address").val();
                var birthday = $("#bday").val();
                $.ajax({
                    url: "http://127.0.0.1:5000/api/register",
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify({
                        'username':username,
                        'password':password,
                        'firstname':firstname,
                        'middlename':middlename,
                        'lastname':lastname,
                        'age':age,
                        'contact':contact,
                        'address':address,
                        'birthday':birthday,
                    }),
                    method: "POST",
                    dataType: "json",
                    crossDomain: true,
                    success: function () {
                        console.log("success");
                        alert("registration success!");
                        window.location.href='/'
                    },
                    error: function () {
                        console.log('error')
                    },
                    complete: function (jqXHR) {
                        if (jqXHR.status == '401') {
                            console.log(jqXHR.status)
                        }
                    }
                })
            });
        })
    </script>
    <script>
        function submitBday() {
                var Q4A = "";
                var Bdate = document.getElementById('bday').value;
                var Bday = +new Date(Bdate);
                Q4A += "" + ~~ ((Date.now() - Bday) / (31557600000));
                var theBday = document.getElementById('age');
                var age = theBday.innerHTML = Q4A;
            }
    </script>

  </head>

  <body>


    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="/">Mindanao Escapade</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">




          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="masthead" style="background-image: url('../static/img/home-bg.jpg'); background-position: center; background-repeat: no-repeat; height: 100%; padding: 140px; margin-bottom: -30%;" >
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="container">
            <form style="margin: 0 auto; width:400px;" id="target">
                <div class="form-group">
                    <label class="section-subheading"><i class="fa fa-user-circle"> </i> Username</label>
                    <input type="text" class="form-control" id="username" placeholder="Enter username">

                    <br><label class="section-subheading"><i class="fa fa-lock"></i> Password</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter password">

                    <br><label class="section-subheading"><i class="fa fa-user"></i> First Name</label>
                    <input type="text" class="form-control" id="fname" placeholder="Enter first name">

                    <br><label class="section-subheading"><i class="fa fa-user"></i> Middle Name</label>
                    <input type="text" class="form-control" id="mname" placeholder="Enter last name">

                    <br><label class="section-subheading"><i class="fa fa-user"></i> Last Name</label>
                    <input type="text" class="form-control" id="lname" placeholder="Enter last name">

                    <div>
                        <br><label class="section-subheading"><i class="fa fa-calendar"></i> Date of
                            Birth</label>
                        <input type="date" class="form-control" id="bday" placeholder="Date of Birth"
                                  onchange="submitBday()">
                    </div>
                    <p hidden id="age"></p>

                    <br><label class="section-subheading"><i class="fa fa-address-card"></i> Address</label>
                    <input type="text" class="form-control" id="address" placeholder="Enter address">

                    <br><label class="section-subheading"><i class="fa fa-phone-square"></i> Contact
                        Number</label>
                    <input type="number" class="form-control" id="number" placeholder="Enter contact number">
                </div>
                <center><input type="submit" class="btn btn-primary" name="Register" value="Register" id="btn"></center>
            </form>
        </div>
          </div>
        </div>
      </div>
    </header>



    
    

    <!-- Bootstrap core JavaScript -->
    <script src="../static/vendor/jquery/jquery.min.js"></script>
    <script src="../static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="../static/js/jqBootstrapValidation.js"></script>
    <script src="../static/js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="../static/js/clean-blog.min.js"></script>

  </body>

</html>
